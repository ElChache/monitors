import{c as it,l as lt}from"../chunks/DY2n60aa.js";import"../chunks/B3U0dzdT.js";import{t as X,a5 as Be,ai as Je,aj as bt,b5 as ft,ao as Ke,ap as _t,ad as gt,b6 as yt,b7 as xt,b8 as Qe,a0 as wt,b9 as Tt,ah as Me,ba as Ct,bb as Xe,F as f,bc as jt,N as kt,I as Et,p as rt,b3 as At,o as st,q as e,m as D,l as $t,aA as _e,g as Mt,f as St,j as l,k as s,z as a,a as N,n as C,u as q,A as Ze,r as U,D as E,i as c,b as T,d as ot,x as He,bd as et,v as $,h as Vt,$ as Nt,y as Se,W as Rt,C as tt}from"../chunks/Dj_MzOAd.js";import{a as M}from"../chunks/DpAHg45Y.js";import{i as z}from"../chunks/Cuz_4TPC.js";import{e as Ie,i as Ue}from"../chunks/g81J5-kY.js";import{r as qe,a as ge,s as Ve}from"../chunks/ChDYIZxk.js";import{i as nt}from"../chunks/C-FtVNBC.js";import"../chunks/CROSmZe9.js";import{c as Dt}from"../chunks/B7Cuh4-K.js";import{b as ye}from"../chunks/Cfjr_KEZ.js";import{b as at}from"../chunks/Bsjv_I7G.js";import{s as Pt}from"../chunks/Bfc47y5P.js";import{p as Fe}from"../chunks/BQhR6swN.js";function Lt(H,S,d){var _,j;if(!S||S===Ct(String(d??"")))return;let m;const t=(_=H.__svelte_meta)==null?void 0:_.loc;t?m=`near ${t.file}:${t.line}:${t.column}`:(j=Xe)!=null&&j[f]&&(m=`in ${Xe[f]}`),jt(kt(m))}function zt(H,S,d=!1,m=!1,t=!1){var _=H,j="";X(()=>{var g=bt;if(j===(j=S()??"")){Be&&Je();return}if(g.nodes_start!==null&&(ft(g.nodes_start,g.nodes_end),g.nodes_start=g.nodes_end=null),j!==""){if(Be){for(var P=Ke.data,p=Je(),J=p;p!==null&&(p.nodeType!==_t||p.data!=="");)J=p,p=gt(p);if(p===null)throw yt(),xt;t||Lt(p.parentNode,P,j),Qe(Ke,J),_=wt(p);return}var h=j+"";d?h=`<svg>${h}</svg>`:m&&(h=`<math>${h}</math>`);var k=Tt(h);if((d||m)&&(k=Me(k)),Qe(Me(k),k.lastChild),d||m)for(;Me(k);)_.before(Me(k));else _.before(k)}})}function Ot(H,S){var _;var d=(_=H.$$events)==null?void 0:_[S.type],m=Et(d)?d.slice():d==null?[]:[d];for(var t of m)t.call(this,S)}b[f]="src/lib/components/EmailTemplateEditor.svelte";var qt=M($('<div class="variable-item svelte-ou4ihl"><button class="variable-button svelte-ou4ihl"><code class="variable-code svelte-ou4ihl"> </code> <span class="variable-description svelte-ou4ihl"> </span> <span class="variable-example svelte-ou4ihl"> </span></button></div>'),b[f],[[241,10,[[242,12,[[247,14],[248,14],[249,14]]]]]]),Ft=M($('<div class="variables-panel svelte-ou4ihl"><h3 class="variables-title svelte-ou4ihl">Available Variables</h3> <div class="variables-grid svelte-ou4ihl"></div></div>'),b[f],[[237,4,[[238,6],[239,6]]]]),Ht=M($('<div class="editor-wrapper svelte-ou4ihl"><label for="html-editor" class="form-label svelte-ou4ihl">HTML Email Content</label> <textarea id="html-editor" class="content-textarea html-editor svelte-ou4ihl" spellcheck="false"></textarea></div>'),b[f],[[308,10,[[309,12],[310,12]]]]),It=M($('<div class="editor-wrapper svelte-ou4ihl"><label for="text-editor" class="form-label svelte-ou4ihl">Plain Text Content</label> <textarea id="text-editor" class="content-textarea text-editor svelte-ou4ihl"></textarea></div>'),b[f],[[321,10,[[322,12],[323,12]]]]),Ut=M($('<li class="error-item svelte-ou4ihl"> </li>'),b[f],[[342,12]]),Wt=M($('<div class="validation-errors svelte-ou4ihl"><h4 class="errors-title svelte-ou4ihl">⚠️ Validation Errors</h4> <ul class="errors-list svelte-ou4ihl"></ul></div>'),b[f],[[338,6,[[339,8],[340,8]]]]),Yt=M($('<span class="loading-spinner svelte-ou4ihl"></span>'),b[f],[[368,12]]),Gt=M($('<span class="loading-spinner svelte-ou4ihl"></span>'),b[f],[[383,10]]),Bt=M($('<div class="preview-overlay svelte-ou4ihl"><div class="preview-modal svelte-ou4ihl"><div class="preview-header svelte-ou4ihl"><h3 class="preview-title svelte-ou4ihl">Email Preview</h3> <button class="close-preview svelte-ou4ihl" aria-label="Close preview">✕</button></div> <div class="preview-content svelte-ou4ihl"><div class="preview-subject svelte-ou4ihl"><strong>Subject:</strong> </div> <div class="preview-body svelte-ou4ihl"><!></div></div></div></div>'),b[f],[[393,2,[[394,4,[[395,6,[[396,8],[397,8]]],[406,6,[[407,8,[[408,10]]],[414,8]]]]]]]]),Jt=M($('<div class="email-template-editor svelte-ou4ihl"><div class="editor-header svelte-ou4ihl"><div class="header-left svelte-ou4ihl"><h2 class="editor-title svelte-ou4ihl">Email Template Configuration</h2> <p class="editor-description svelte-ou4ihl">Customize notification email templates with dynamic variables</p></div> <div class="header-actions svelte-ou4ihl"><button class="btn-secondary svelte-ou4ihl"> </button> <button class="btn-outline svelte-ou4ihl">📋 Preview</button> <button class="btn-outline svelte-ou4ihl">🔄 Reset</button></div></div> <!> <div class="template-form svelte-ou4ihl"><div class="form-section svelte-ou4ihl"><div class="form-group svelte-ou4ihl"><label for="template-name" class="form-label svelte-ou4ihl">Template Name</label> <input id="template-name" type="text" class="form-input svelte-ou4ihl" placeholder="Enter template name"/></div> <div class="form-group svelte-ou4ihl"><label for="template-subject" class="form-label svelte-ou4ihl">Subject Line <span class="field-hint svelte-ou4ihl"></span></label> <input id="template-subject" type="text" class="form-input svelte-ou4ihl"/></div></div> <div class="form-section svelte-ou4ihl"><div class="content-tabs svelte-ou4ihl"><button>📄 HTML Content</button> <button>📝 Plain Text</button></div> <div class="content-editor svelte-ou4ihl"><!></div></div> <!> <div class="form-section test-section svelte-ou4ihl"><h3 class="section-title svelte-ou4ihl">Test Email</h3> <div class="test-controls svelte-ou4ihl"><div class="form-group svelte-ou4ihl"><label for="test-email" class="form-label svelte-ou4ihl">Test Email Address</label> <input id="test-email" type="email" class="form-input svelte-ou4ihl" placeholder="your@email.com"/></div> <button class="btn-outline test-btn svelte-ou4ihl"><!> 📧 Send Test</button></div></div> <div class="form-actions svelte-ou4ihl"><button class="btn-primary save-btn svelte-ou4ihl"><!> 💾 Save Template</button></div></div></div> <!>',1),b[f],[[201,0,[[203,2,[[204,4,[[205,6],[206,6]]],[209,4,[[210,6],[218,6],[226,6]]]]],[258,2,[[260,4,[[261,6,[[262,8],[263,8]]],[272,6,[[273,8,[[275,10]]],[277,8]]]]],[288,4,[[289,6,[[290,8],[297,8]]],[306,6]]],[349,4,[[350,6],[351,6,[[352,8,[[353,10],[354,10]]],[362,8]]]]],[376,4,[[377,6]]]]]]]]);function b(H,S){it(new.target),rt(S,!1,b);var d=Dt(S);const m=At();let t=Fe(S,"template",28,()=>({id:"",name:"Default Notification",subject:"{{monitor_name}} Alert: {{trigger_reason}}",htmlContent:`
      <html>
        <body style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <h2 style="color: #0d47a1;">{{monitor_name}} Alert</h2>
          <p><strong>Monitor Status:</strong> {{monitor_status}}</p>
          <p><strong>Current Value:</strong> {{current_value}}</p>
          <p><strong>Trigger Condition:</strong> {{trigger_condition}}</p>
          <p><strong>Time:</strong> {{timestamp}}</p>
          <hr>
          <p><a href="{{monitor_url}}" style="background: #0d47a1; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px;">View Monitor</a></p>
        </body>
      </html>
    `,textContent:`{{monitor_name}} Alert
    
Monitor Status: {{monitor_status}}
Current Value: {{current_value}}
Trigger Condition: {{trigger_condition}}
Time: {{timestamp}}

View Monitor: {{monitor_url}}`,variables:[{name:"monitor_name",description:"Name of the monitor",example:"Tesla Stock Price"},{name:"monitor_status",description:"Current status",example:"Alert Triggered"},{name:"current_value",description:"Current monitored value",example:"$195.50"},{name:"trigger_condition",description:"What triggered the alert",example:"Price dropped below $200"},{name:"timestamp",description:"When the alert was triggered",example:"2024-01-15 10:30 AM"},{name:"monitor_url",description:"Link to monitor details",example:"https://monitors.app/monitor/123"}]})),_=Fe(S,"loading",8,!1),j=Fe(S,"showPreview",12,!1),g=D("html"),P=D(!1),p=D(""),J=D(""),h=D({isValid:!0,errors:[]}),k=D(),W=D();function Z(i){i.style.height="auto",i.style.height=i.scrollHeight+"px"}function Ne(i){const n=C(e(g),"html")?e(k):e(W),v=n.selectionStart,y=n.selectionEnd,x=`{{${i}}}`,V=C(e(g),"html")?t().htmlContent:t().textContent,w=V.substring(0,v)+x+V.substring(y);C(e(g),"html")?d.mutation(null,["template","htmlContent"],t(t().htmlContent=w,!0),92,6):d.mutation(null,["template","textContent"],t(t().textContent=w,!0),94,6),setTimeout(()=>{n.focus(),n.setSelectionRange(v+x.length,v+x.length)},0),c(P,!1)}function ae(){const i=[];t().name.trim()||i.push("Template name is required"),t().subject.trim()||i.push("Subject line is required"),!t().htmlContent.trim()&&!t().textContent.trim()&&i.push("At least one content type (HTML or Text) is required");const n=`${t().subject} ${t().htmlContent} ${t().textContent}`,v=/\{\{([^}]+)\}\}/g,y=Array.from(n.matchAll(v)).map(w=>w[1].trim()),x=t().variables.map(w=>w.name),V=y.filter(w=>!x.includes(w));return V.length>0&&i.push(`Invalid variables: ${V.join(", ")}`),c(h,{isValid:C(i.length,0),errors:i}),e(h).isValid}function O(){let i=t().htmlContent;t().variables.forEach(n=>{const v=new RegExp(`\\{\\{${n.name}\\}\\}`,"g");i=i.replace(v,n.example)}),c(J,i),j(!0),m("preview",{template:t()})}function Re(){ae()&&m("save",{template:t()})}function ie(){if(ae()){if(!e(p).trim()){He(h,e(h).errors=["Test email address is required"]),He(h,e(h).isValid=!1);return}m("test",{template:t(),testEmail:e(p)})}}function le(){confirm("Are you sure you want to reset to default template? This will lose all changes.")&&m("reset")}st(()=>{e(k)&&Z(e(k)),e(W)&&Z(e(W))}),$t(()=>_e(t()),()=>{t()&&ae()}),Mt();var re={...lt()};nt();var se=Jt(),oe=St(se),ne=l(oe),xe=s(l(ne),2),Y=l(xe),de=l(Y);a(Y);var K=s(Y,2),De=s(K,2);a(xe),a(ne);var we=s(ne,2);{var Te=i=>{var n=Ft(),v=s(l(n),2);N(()=>Ie(v,5,()=>(_e(t()),q(()=>t().variables)),Ue,(y,x)=>{var V=qt(),w=l(V),he=l(w),Ae=l(he,!0);a(he);var be=s(he,2),te=l(be,!0);a(be);var fe=s(be,2),$e=l(fe);a(fe),a(w),a(V),X(()=>{ge(w,"title",(e(x),q(()=>`Click to insert: {{${e(x).name}}}`))),U(Ae,(e(x),q(()=>`{{${e(x).name}}}`))),U(te,(e(x),q(()=>e(x).description))),U($e,`Example: ${e(x),q(()=>e(x).example)??""}`)}),E("click",w,()=>Ne(e(x).name)),T(y,V)}),"each",b,240,8),a(v),a(n),T(i,n)};N(()=>z(we,i=>{e(P)&&i(Te)}),"if",b,236,2)}var ve=s(we,2),ce=l(ve),me=l(ce),ue=s(l(me),2);qe(ue),a(me);var Ce=s(me,2),pe=l(Ce),Pe=s(l(pe));Pe.textContent=`Use ${{variables}} for dynamic content`,a(pe);var r=s(pe,2);qe(r),ge(r,"placeholder",`${{monitor_name}} Alert: ${{trigger_reason}}`),a(Ce),a(ce);var o=s(ce,2),u=l(o),R=l(u);let I;var Q=s(R,2);let G;a(u);var L=s(u,2),B=l(L);{var Le=i=>{var n=Ht(),v=s(l(n),2);et(v),ge(v,"placeholder",`<html><body>Your HTML email content with ${{variables}}</body></html>`),at(v,y=>c(k,y),()=>e(k)),a(n),ye(v,()=>t().htmlContent,y=>d.mutation(null,["template","htmlContent"],t(t().htmlContent=y,!0),313,26)),E("input",v,()=>Z(e(k))),T(i,n)},ze=i=>{var n=It(),v=s(l(n),2);et(v),ge(v,"placeholder",`Your plain text email content with ${{variables}}`),at(v,y=>c(W,y),()=>e(W)),a(n),ye(v,()=>t().textContent,y=>d.mutation(null,["template","textContent"],t(t().textContent=y,!0),326,26)),E("input",v,()=>Z(e(W))),T(i,n)};N(()=>z(B,i=>{C(e(g),"html")?i(Le):i(ze,!1)}),"if",b,307,8)}a(L),a(o);var je=s(o,2);{var F=i=>{var n=Wt(),v=s(l(n),2);N(()=>Ie(v,5,()=>(e(h),q(()=>e(h).errors)),Ue,(y,x)=>{var V=Ut(),w=l(V,!0);a(V),X(()=>U(w,e(x))),T(y,V)}),"each",b,341,10),a(v),a(n),T(i,n)};N(()=>z(je,i=>{e(h),q(()=>!e(h).isValid)&&i(F)}),"if",b,337,4)}var ee=s(je,2),We=s(l(ee),2),Oe=l(We),Ye=s(l(Oe),2);qe(Ye),a(Oe);var ke=s(Oe,2),dt=l(ke);{var vt=i=>{var n=Yt();T(i,n)};N(()=>z(dt,i=>{_()&&i(vt)}),"if",b,367,10)}Ze(),a(ke),a(We),a(ee);var Ge=s(ee,2),Ee=l(Ge),ct=l(Ee);{var mt=i=>{var n=Gt();T(i,n)};N(()=>z(ct,i=>{_()&&i(mt)}),"if",b,382,8)}Ze(),a(Ee),a(Ge),a(ve),a(oe);var ut=s(oe,2);{var pt=i=>{var n=Bt(),v=l(n),y=l(v),x=s(l(y),2);a(y);var V=s(y,2),w=l(V),he=s(l(w));a(w);var Ae=s(w,2),be=l(Ae);zt(be,()=>e(J)),a(Ae),a(V),a(v),a(n),X(te=>U(he,` ${te??""}`),[()=>(_e(t()),q(()=>t().subject.replace(/\{\{([^}]+)\}\}/g,(te,fe)=>{var $e;return(($e=t().variables.find(ht=>C(ht.name,fe)))==null?void 0:$e.example)||`{{${fe}}}`})))]),E("click",x,()=>j(!1)),E("click",v,Pt(function(te){Ot.call(this,S,te)})),E("click",n,()=>j(!1)),T(i,n)};N(()=>z(ut,i=>{j()&&i(pt)}),"if",b,392,0)}return X((i,n,v)=>{ge(Y,"aria-expanded",e(P)),U(de,`Variables ${e(P)?"▼":"▶"}`),K.disabled=(e(h),q(()=>!e(h).isValid)),I=Ve(R,1,"tab-button svelte-ou4ihl",null,I,i),G=Ve(Q,1,"tab-button svelte-ou4ihl",null,G,n),ke.disabled=v,Ee.disabled=(_e(_()),e(h),q(()=>_()||!e(h).isValid))},[()=>({active:C(e(g),"html")}),()=>({active:C(e(g),"text")}),()=>(_e(_()),e(h),e(p),q(()=>_()||!e(h).isValid||!e(p).trim()))]),E("click",Y,()=>c(P,!e(P))),E("click",K,O),E("click",De,le),ye(ue,()=>t().name,i=>d.mutation(null,["template","name"],t(t().name=i,!0),266,22)),ye(r,()=>t().subject,i=>d.mutation(null,["template","subject"],t(t().subject=i,!0),280,22)),E("click",R,()=>c(g,"html")),E("click",Q,()=>c(g,"text")),ye(Ye,()=>e(p),i=>c(p,i)),E("click",ke,ie),E("click",Ee,Re),T(H,se),ot(re)}A[f]="src/routes/settings/email-templates/+page.svelte";var Kt=M($("<div><!> </div>"),A[f],[[280,6]]),Qt=M($('<div class="loading-spinner svelte-yhyjbn"></div>'),A[f],[[293,10]]),Xt=M($('<button class="delete-button svelte-yhyjbn" aria-label="Delete template" title="Delete template">🗑️</button>'),A[f],[[314,14]]),Zt=M($('<div><button class="template-button svelte-yhyjbn"><div class="template-info svelte-yhyjbn"><div class="template-name svelte-yhyjbn"> </div> <div class="template-subject svelte-yhyjbn"> </div></div></button> <!></div>'),A[f],[[299,10,[[303,12,[[307,14,[[308,16],[309,16]]]]]]]]),ea=M($('<div class="empty-state svelte-yhyjbn"><div class="empty-icon svelte-yhyjbn">📧</div> <p>No templates found</p></div>'),A[f],[[327,10,[[328,12],[329,12]]]]),ta=M($('<div class="no-template-selected svelte-yhyjbn"><div class="no-template-icon svelte-yhyjbn">📝</div> <h3 class="svelte-yhyjbn">Select a Template</h3> <p class="svelte-yhyjbn">Choose a template from the sidebar to edit, or create a new one.</p> <button class="btn-primary svelte-yhyjbn">➕ Create New Template</button></div>'),A[f],[[346,8,[[347,10],[348,10],[349,10],[350,10]]]]),aa=M($('<div class="email-templates-page svelte-yhyjbn"><div class="page-header svelte-yhyjbn"><div class="header-content svelte-yhyjbn"><div class="header-text svelte-yhyjbn"><h1 class="page-title svelte-yhyjbn">Email Template Configuration</h1> <p class="page-description svelte-yhyjbn">Customize notification email templates with dynamic variables and preview functionality</p></div> <div class="header-actions svelte-yhyjbn"><button class="btn-primary svelte-yhyjbn">➕ New Template</button></div></div> <!></div> <div class="templates-container svelte-yhyjbn"><div class="templates-sidebar svelte-yhyjbn"><div class="sidebar-header svelte-yhyjbn"><h2 class="sidebar-title svelte-yhyjbn">Email Templates</h2> <!></div> <div class="templates-list svelte-yhyjbn"><!> <!></div></div> <div class="template-editor svelte-yhyjbn"><!></div></div></div>'),A[f],[[257,0,[[259,2,[[260,4,[[261,6,[[262,8],[263,8]]],[268,6,[[269,8]]]]]]],[287,2,[[289,4,[[290,6,[[291,8]]],[297,6]]],[336,4]]]]]]);function A(H,S){it(new.target),rt(S,!1,A);let d=D([]),m=D(null),t=D(!1),_=D(!1),j=D(!1),g=D(""),P=D("success");const p={id:"default",name:"Default Alert Notification",subject:"🚨 {{monitor_name}} Alert: {{trigger_reason}}",htmlContent:`
      <!DOCTYPE html>
      <html>
        <head>
          <meta charset="utf-8">
          <meta name="viewport" content="width=device-width, initial-scale=1">
          <title>Monitor Alert</title>
        </head>
        <body style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px;">
          <div style="background: linear-gradient(135deg, #0d47a1 0%, #1565c0 100%); color: white; padding: 20px; border-radius: 8px 8px 0 0; text-align: center;">
            <h1 style="margin: 0; font-size: 24px;">📊 Monitor Alert</h1>
            <p style="margin: 10px 0 0; opacity: 0.9;">{{monitor_name}}</p>
          </div>
          
          <div style="background: #f9fafb; border: 1px solid #e5e7eb; border-top: none; padding: 24px; border-radius: 0 0 8px 8px;">
            <div style="background: white; padding: 20px; border-radius: 6px; margin-bottom: 20px;">
              <h2 style="color: #0d47a1; margin: 0 0 16px; font-size: 18px;">Alert Details</h2>
              
              <table style="width: 100%; border-collapse: collapse;">
                <tr>
                  <td style="padding: 8px 0; font-weight: 600; color: #374151; width: 140px;">Status:</td>
                  <td style="padding: 8px 0; color: #1f2937;">{{monitor_status}}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: 600; color: #374151;">Current Value:</td>
                  <td style="padding: 8px 0; color: #1f2937; font-family: monospace; background: #f3f4f6; padding: 4px 8px; border-radius: 4px; font-size: 14px;">{{current_value}}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: 600; color: #374151;">Trigger:</td>
                  <td style="padding: 8px 0; color: #1f2937;">{{trigger_condition}}</td>
                </tr>
                <tr>
                  <td style="padding: 8px 0; font-weight: 600; color: #374151;">Time:</td>
                  <td style="padding: 8px 0; color: #6b7280; font-size: 14px;">{{timestamp}}</td>
                </tr>
              </table>
            </div>
            
            <div style="text-align: center; margin: 24px 0;">
              <a href="{{monitor_url}}" style="display: inline-block; background: #0d47a1; color: white; padding: 12px 24px; text-decoration: none; border-radius: 6px; font-weight: 600; font-size: 14px;">View Monitor Details</a>
            </div>
            
            <div style="border-top: 1px solid #e5e7eb; padding-top: 16px; margin-top: 20px;">
              <p style="margin: 0; font-size: 12px; color: #9ca3af; text-align: center;">
                This alert was generated by <a href="{{dashboard_url}}" style="color: #0d47a1;">Monitors</a> • 
                <a href="{{unsubscribe_url}}" style="color: #6b7280;">Manage notifications</a>
              </p>
            </div>
          </div>
        </body>
      </html>
    `,textContent:`🚨 MONITOR ALERT: {{monitor_name}}

Alert Details:
Status: {{monitor_status}}
Current Value: {{current_value}}
Trigger Condition: {{trigger_condition}}
Time: {{timestamp}}

View Monitor: {{monitor_url}}

---
This alert was generated by Monitors
Dashboard: {{dashboard_url}}
Manage notifications: {{unsubscribe_url}}`,variables:[{name:"monitor_name",description:"Name of the monitor",example:"Tesla Stock Price Tracker"},{name:"monitor_status",description:"Current alert status",example:"Alert Triggered"},{name:"current_value",description:"Current monitored value",example:"$195.50"},{name:"trigger_condition",description:"What triggered the alert",example:"Price dropped below $200.00"},{name:"timestamp",description:"When alert was triggered",example:"January 15, 2024 at 10:30 AM EST"},{name:"monitor_url",description:"Link to monitor details",example:"https://monitors.app/monitor/abc123"},{name:"dashboard_url",description:"Link to dashboard",example:"https://monitors.app/dashboard"},{name:"unsubscribe_url",description:"Link to notification settings",example:"https://monitors.app/settings/notifications"}]};st(async()=>{(await Se(J()))()});async function J(){c(t,!0);try{(await Se(new Promise(r=>setTimeout(r,800))))(),c(d,[{...p},{id:"urgent",name:"Urgent Alert Template",subject:"🚨 URGENT: {{monitor_name}} - Immediate Action Required",htmlContent:p.htmlContent.replace("Monitor Alert","URGENT ALERT"),textContent:p.textContent.replace("MONITOR ALERT","URGENT ALERT"),variables:p.variables},{id:"summary",name:"Daily Summary Template",subject:"📊 Daily Summary: {{monitor_count}} monitors checked",htmlContent:"<html><body><h2>Daily Summary</h2><p>{{summary_content}}</p></body></html>",textContent:`Daily Summary

{{summary_content}}`,variables:[{name:"monitor_count",description:"Number of monitors",example:"5"},{name:"summary_content",description:"Summary content",example:"All monitors operating normally"}]}]),c(m,e(d)[0])}catch{O("Failed to load templates","error")}finally{c(t,!1)}}function h(r){c(m,{...r})}function k(){c(m,{id:"",name:"New Template",subject:"{{monitor_name}} Alert",htmlContent:"<html><body><h2>{{monitor_name}} Alert</h2><p>{{trigger_condition}}</p></body></html>",textContent:`{{monitor_name}} Alert

{{trigger_condition}}`,variables:p.variables})}async function W(r){const{template:o}=r.detail;c(_,!0);try{if((await Se(new Promise(u=>setTimeout(u,1500))))(),o.id){const u=e(d).findIndex(R=>C(R.id,o.id));u>=0&&He(d,e(d)[u]=o)}else o.id=`template_${Date.now()}`,c(d,[...e(d),o]);c(d,e(d)),c(m,o),O("Template saved successfully","success")}catch{O("Failed to save template","error")}finally{c(_,!1)}}async function Z(r){const{template:o,testEmail:u}=r.detail;c(j,!0);try{(await Se(new Promise(R=>setTimeout(R,2e3))))(),O(`Test email sent to ${u}`,"success")}catch{O("Failed to send test email","error")}finally{c(j,!1)}}function Ne(){e(m)&&(c(m,{...p}),O("Template reset to default","success"))}async function ae(r){var o;if(C(r,"default")){O("Cannot delete default template","error");return}if(confirm("Are you sure you want to delete this template?"))try{c(d,e(d).filter(u=>C(u.id,r,!1))),C((o=e(m))==null?void 0:o.id,r)&&c(m,e(d)[0]||null),O("Template deleted","success")}catch{O("Failed to delete template","error")}}function O(r,o){c(g,r),c(P,o),setTimeout(()=>{c(g,"")},4e3)}var Re={...lt()};nt();var ie=aa();Vt(r=>{Nt.title="Email Templates - Monitors"});var le=l(ie),re=l(le),se=s(l(re),2),oe=l(se);a(se),a(re);var ne=s(re,2);{var xe=r=>{var o=Kt();let u;var R=l(o);{var I=L=>{var B=tt("✅");T(L,B)},Q=L=>{var B=tt("❌");T(L,B)};N(()=>z(R,L=>{C(e(P),"success")?L(I):L(Q,!1)}),"if",A,281,8)}var G=s(R);a(o),X(L=>{u=Ve(o,1,"message svelte-yhyjbn",null,u,L),U(G,` ${e(g)??""}`)},[()=>({success:C(e(P),"success"),error:C(e(P),"error")})]),T(r,o)};N(()=>z(ne,r=>{e(g)&&r(xe)}),"if",A,279,4)}a(le);var Y=s(le,2),de=l(Y),K=l(de),De=s(l(K),2);{var we=r=>{var o=Qt();T(r,o)};N(()=>z(De,r=>{e(t)&&r(we)}),"if",A,292,8)}a(K);var Te=s(K,2),ve=l(Te);N(()=>Ie(ve,1,()=>e(d),Ue,(r,o)=>{var u=Zt();let R;var I=l(u),Q=l(I),G=l(Q),L=l(G,!0);a(G);var B=s(G,2),Le=l(B,!0);a(B),a(Q),a(I);var ze=s(I,2);{var je=F=>{var ee=Xt();E("click",ee,()=>ae(e(o).id)),T(F,ee)};N(()=>z(ze,F=>{C(e(o).id,"default",!1)&&F(je)}),"if",A,313,12)}a(u),X(F=>{R=Ve(u,1,"template-item svelte-yhyjbn",null,R,F),U(L,e(o).name),U(Le,e(o).subject)},[()=>{var F;return{active:C((F=e(m))==null?void 0:F.id,e(o).id)}}]),E("click",I,()=>h(e(o))),T(r,u)}),"each",A,298,8);var ce=s(ve,2);{var me=r=>{var o=ea();T(r,o)};N(()=>z(ce,r=>{C(e(d).length,0)&&!e(t)&&r(me)}),"if",A,326,8)}a(Te),a(de);var ue=s(de,2),Ce=l(ue);{var pe=r=>{{let o=Rt(()=>e(_)||e(j));N(()=>b(r,{get loading(){return e(o)},get template(){return e(m)},set template(u){c(m,u)},$$events:{save:W,test:Z,reset:Ne},$$legacy:!0}),"component",A,338,8,{componentTag:"EmailTemplateEditor"})}},Pe=r=>{var o=ta(),u=s(l(o),6);a(o),E("click",u,k),T(r,o)};N(()=>z(Ce,r=>{e(m)?r(pe):r(Pe,!1)}),"if",A,337,6)}return a(ue),a(Y),a(ie),E("click",oe,k),T(H,ie),ot(Re)}export{A as component};
